# 2.2. Режимы окружений

## Результат
- **Статус:** ⚠️ Требует улучшения
- **Severity:** S1
- **Краткое заключение:** отсутствует чёткое разделение окружений и настройка переменных окружения для prod/dev/stage.

## Наблюдение
- В репозитории нет отдельных `.env.example` для dev/stage/prod, не описано отключение `APP_DEBUG` на проде.
- В коде встречаются проверки `isset($_GET['tst'])`/`isset($_GET['test'])`, что говорит о смешении тестовых и боевых сценариев.
- Horizons/queues отключены из-за проблем с хостингом — значит, окружение не контролируется.

## Доказательства
- `routes/web.php` — многочисленные проверки GET-параметров для включения тестовых режимов.
- Отсутствие документации по окружениям в `README.md`.

## Риски
- Запуск приложения в production с `APP_DEBUG=true` и выводом чувствительных данных.
- Случайное выполнение тестовых маршрутов на боевой базе.
- Трудности с масштабированием (невозможно быстро поднять новое окружение).

## Рекомендации
1. Создать отдельные конфигурации `.env.example`, `.env.stage`, `.env.production`.
2. Включить конфигурационный кеш (`php artisan config:cache`) в пайплайн деплоя.
3. Реализовать проверку `APP_ENV` и `APP_DEBUG` в health-check (например, в CI).
4. Перевести тестовые маршруты в отдельные окружения или feature-флаги.



