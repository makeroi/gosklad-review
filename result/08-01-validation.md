# 8.1. FormRequest и правила

## Результат
- **Статус:** ⚠️ Требует проверки
- **Severity:** S2
- **Краткое заключение:** часть эндпоинтов использует FormRequest, но публичные маршруты обходят валидацию.

## Наблюдение
- В каталоге `app/Http/Requests/V1` много FormRequest-классов, однако старые маршруты в `routes/web.php` напрямую используют `Request`.
- Публичные endpoint'ы (`pushProducts`, `to-amocrm`) принимают данные без проверки.

## Доказательства
- `app/Http/Requests/V1` — наличие валидаторов
- `routes/web.php` — использование `function (Request $request)` без валидации

## Риски
- Возможна запись некорректных данных (например, пустой телефон, несоответствие типов).
- Повышенный риск XSS/SQL-инъекций при отсутствии фильтрации.

## Рекомендации
1. Применить FormRequest ко всем маршрутам, особенно к публичным API.
2. Добавить локализацию сообщений об ошибках и унифицированный формат ответа.
3. Ввести слой DTO → Service, чтобы связка «валидация → бизнес-логика» была централизована.

## Следующие шаги
- 🟨 Ответственный: Backend
- ⏱ Срок: 2 недели
- 📌 Контроль: в review проверять наличие FormRequest/Rule для новых эндпоинтов.
