# 12.2. Аутентификация и авторизация API

## Результат
- **Статус:** ❌ Не пройдено
- **Severity:** S0
- **Краткое заключение:** аутентификация отсутствует для многих критичных маршрутов; бессрочные токены хранятся в коде без ротации.

## Наблюдение
- Публичные эндпоинты используют простые сравнения токена (`$request->bearerToken() == '...'`) вместо полноценной auth-системы.
- Нет разграничения прав (scopes) и срока действия токенов.
- Не ведётся аудит входов, нет механизма revoke.

## Доказательства
- `routes/web.php:324-406`, `routes/web.php:401-427` — хардкод токенов
- Отсутствие конфигурации Sanctum/Passport

## Риски
- Любой, кто узнает токен, получает полный доступ к API.
- Невозможно быстро отозвать доступ у скомпрометированного клиента.

## Рекомендации
1. Внедрить Laravel Sanctum/Passport или JWT-провайдера.
2. Хранить токены в БД/Redis, установить срок действия и механизмы ротации.
3. Добавить `abilities/scopes` для тонкого контроля.
4. Реализовать аудит и возможность revoke.

## Следующие шаги
- 🟥 Ответственный: Backend
- ⏱ Срок: немедленно
- 📌 Контроль: автоматические тесты, проверяющие авторизацию на всех API.
