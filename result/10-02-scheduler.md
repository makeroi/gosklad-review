# 10.2. Планировщик

## Результат
- **Статус:** ⚠️ Требует улучшения
- **Severity:** S2
- **Краткое заключение:** расписание заданий минимальное; часть задач запускается вручную или cron-скриптами вне Laravel Scheduler.

## Наблюдение
- `app/Console/Kernel.php` содержит только `logs_clear` и `update_actual_accounts`.
- Многие задачи запускаются через отдельные скрипты/консольные команды (`Job::make`, кастомные cron'ы).
- Нет блокировок/Mutex для предотвращения параллельного запуска.

## Доказательства
- `app/Console/Kernel.php`
- Описание команды: «джобы через крон запускается процесс, из редиска запускается» (со звонка)

## Риски
- Дублирование задач или гонки при запуске вручную.
- Сложно масштабировать и контролировать выполнение.

## Рекомендации
1. Перенести все фоновые задачи в Laravel Scheduler (`app/Console/Kernel.php`).
2. Использовать `withoutOverlapping()` или Redis-мьютексы.
3. Добавить health-check (например, проверка, когда последний раз запускался scheduler).



