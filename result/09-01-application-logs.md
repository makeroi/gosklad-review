# 9.1. Логи приложения

## Результат
- **Статус:** ❌ Не пройдено
- **Severity:** S1
- **Краткое заключение:** логирование реализовано через `Log::info` и `file_put_contents`; отсутствует централизованный сбор, ротация и маскирование PII.

## Наблюдение
- В helper'ах используются функции `lg`, `mkLog`, которые пишут файлы напрямую в `storage_path`.
- Публичные маршруты сохраняют payload’ы в файлы (`storage_path('to-amocrm.json')`).
- Нет request-id, структурированного формата и ротации логов.

## Доказательства
- `app/Helpers/helpers.php:200-559`
- `routes/web.php:324-396` — запись входных данных в файлы

## Риски
- Логи могут содержать персональные данные и секреты (PII/ключи).
- Переполнение диска и деградация производительности.
- Невозможно оперативно анализировать инциденты (без централизованного сбора).

## Рекомендации
1. Использовать стандартные каналы Monolog (Stack, daily) и вынести параметры в `config/logging.php`.
2. Маскировать/не логировать чувствительные поля (телефон, токены).
3. Настроить централизованный сбор (ELK, Loki, CloudWatch) и ротацию.
4. Добавить request-id / correlation-id.



