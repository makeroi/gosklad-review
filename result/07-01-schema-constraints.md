# 7.1. Схема и ограничения

## Результат
- **Статус:** ⚠️ Требует проверки
- **Severity:** S2
- **Краткое заключение:** не проводился аудит схемы БД на наличие внешних ключей, уникальных индексов и ограничений NOT NULL.

## Наблюдение
- В миграциях используется большое количество JSON-полей и полей без ограничений.
- Исторические данные импортировались через SQL-дампы (`database/gs (2).sql`), что могло обойти миграции.
- Не выполнялся `SHOW INDEX FROM ...` для таблиц с большими объёмами (products, orders).

## Доказательства
- `database/migrations/` — требует ревизии
- Отсутствие отчёта по индексам в артефактах аудита

## Риски
- Невозможность обеспечить целостность данных (например, удаление пользователя без каскадного удаления связанных сущностей).
- Медленные запросы из-за отсутствия индексов на фильтруемые поля.

## Рекомендации
1. Собрать диаграмму БД и перечислить таблицы без внешних ключей.
2. Добавить недостающие индексы (по фильтрам/сортировкам в UI).
3. Оценить возможность включения check-constraint (например, для статусов).



