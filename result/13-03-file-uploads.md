# 13.3. Загрузка файлов

## Результат
- **Статус:** ❌ Не пройдено
- **Severity:** S1
- **Краткое заключение:** файлы загружаются и сохраняются без валидации MIME/размера; используются публичные директории и права `0777`.

## Наблюдение
- `TestController` и `DocumentService` скачивают удалённые изображения и кладут их в `public/images`.
- Отсутствует проверка типа файла, максимального размера и антивирусного сканирования.
- Файлы доступны по прямым ссылкам без авторизации.

## Доказательства
- `app/Http/Controllers/Api/V1/TestController.php:154-217`
- `app/Services/DocumentService.php:192-266`

## Риски
- Загрузка вредоносных файлов и выполнение на сервере.
- Утечка приватных документов.
- Заполнение диска большим количеством файлов.

## Рекомендации
1. Использовать Laravel Storage с приватными дисками (S3/MinIO).
2. Валидировать MIME/размер и, при необходимости, запускать антивирусное сканирование.
3. Хранить файлы вне `public/`, выдавать временные ссылки (signed URLs).
4. Ограничить права на файловой системе, запретив `chmod 0777`.



