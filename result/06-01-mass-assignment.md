# 6.1. Массовые присвоения

## Результат
- **Статус:** ⚠️ Требует проверки
- **Severity:** S2
- **Краткое заключение:** не проводился аудит `$fillable`/`$guarded`; присутствуют модели с массовыми присвоениями через JSON-поля.

## Наблюдение
- Модели используют `fields` (JSON) и напрямую записывают массивы (`ProductService::add`), обходя массовую защиту Eloquent.
- Не проверялось наличие `$fillable` в моделях Account/Product/Order.

## Доказательства
- `app/Services/ProductService.php:237-303` — создание продукта и запись полей из входного массива.
- `app/Models/*` — требуется ревизия (не найдены `$fillable` в выборочных моделях).

## Риски
- Возможность записать в модель произвольные поля через API.
- Неявное изменение критичных данных (например, флагов безопасности).

## Рекомендации
1. Провести ревизию всех моделей и определить `$fillable`/`$guarded`.
2. Использовать DTO + валидацию перед записью в модель.
3. Проверить API-эндпоинты на предмет передачи лишних полей.

## Следующие шаги
- 🟨 Ответственный: Backend
- ⏱ Срок: 2 недели
- 📌 Контроль: линтер (Larastan) + code review проверяют массовые присвоения.
